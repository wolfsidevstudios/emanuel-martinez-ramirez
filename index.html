<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Image Editor</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <style>
        /* Custom styles for range inputs */
        input[type="range"] {
            -webkit-appearance: none;
            appearance: none;
            width: 100%;
            height: 4px;
            background: #4a5568; /* gray-700 */
            border-radius: 2px;
            outline: none;
            opacity: 0.7;
            transition: opacity .2s;
        }
        input[type="range"]:hover {
            opacity: 1;
        }
        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 16px;
            height: 16px;
            background: #a0aec0; /* gray-400 */
            cursor: pointer;
            border-radius: 50%;
        }
        input[type="range"]::-moz-range-thumb {
            width: 16px;
            height: 16px;
            background: #a0aec0; /* gray-400 */
            cursor: pointer;
            border-radius: 50%;
        }
        .controls-panel {
            transition: opacity 0.3s ease-in-out;
        }
        .disabled {
            opacity: 0.4;
            pointer-events: none;
        }
    </style>
</head>
<body class="bg-gray-900 text-gray-200 font-sans antialiased">

    <div class="container mx-auto p-4 md:p-8">
        <header class="text-center mb-8">
            <h1 class="text-4xl font-bold text-white">Image Editor Pro</h1>
            <p class="text-gray-400">Upload an image and start editing in your browser.</p>
        </header>

        <main class="grid grid-cols-1 lg:grid-cols-3 gap-8">
            <!-- Controls Panel -->
            <div class="lg:col-span-1 bg-gray-800 p-6 rounded-lg shadow-lg">
                <div class="mb-6">
                    <label for="file-upload" class="w-full inline-block bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 px-4 rounded-lg cursor-pointer text-center transition-colors">
                        <i class="fas fa-upload mr-2"></i> Choose an Image
                    </label>
                    <input id="file-upload" type="file" class="hidden" accept="image/*">
                </div>

                <div id="controls-panel" class="space-y-6 disabled">
                    <!-- Filters -->
                    <div>
                        <h3 class="text-lg font-semibold mb-3 border-b border-gray-700 pb-2">Filters</h3>
                        <div class="space-y-4">
                            <div class="filter-control">
                                <div class="flex justify-between items-center mb-1">
                                    <label for="brightness">Brightness</label>
                                    <span id="brightness-value">100%</span>
                                </div>
                                <input id="brightness" type="range" min="0" max="200" value="100">
                            </div>
                            <div class="filter-control">
                                <div class="flex justify-between items-center mb-1">
                                    <label for="contrast">Contrast</label>
                                    <span id="contrast-value">100%</span>
                                </div>
                                <input id="contrast" type="range" min="0" max="200" value="100">
                            </div>
                            <div class="filter-control">
                                <div class="flex justify-between items-center mb-1">
                                    <label for="saturate">Saturation</label>
                                    <span id="saturate-value">100%</span>
                                </div>
                                <input id="saturate" type="range" min="0" max="200" value="100">
                            </div>
                            <div class="filter-control">
                                <div class="flex justify-between items-center mb-1">
                                    <label for="grayscale">Grayscale</label>
                                    <span id="grayscale-value">0%</span>
                                </div>
                                <input id="grayscale" type="range" min="0" max="100" value="0">
                            </div>
                            <div class="filter-control">
                                <div class="flex justify-between items-center mb-1">
                                    <label for="sepia">Sepia</label>
                                    <span id="sepia-value">0%</span>
                                </div>
                                <input id="sepia" type="range" min="0" max="100" value="0">
                            </div>
                            <div class="filter-control">
                                <div class="flex justify-between items-center mb-1">
                                    <label for="invert">Invert</label>
                                    <span id="invert-value">0%</span>
                                </div>
                                <input id="invert" type="range" min="0" max="100" value="0">
                            </div>
                        </div>
                    </div>

                    <!-- Transformations -->
                    <div>
                        <h3 class="text-lg font-semibold mb-3 border-b border-gray-700 pb-2">Transform</h3>
                        <div class="grid grid-cols-2 gap-3">
                            <button id="rotate-left" class="bg-gray-700 hover:bg-gray-600 text-white font-bold py-2 px-4 rounded-lg transition-colors"><i class="fas fa-rotate-left mr-2"></i>Rotate Left</button>
                            <button id="rotate-right" class="bg-gray-700 hover:bg-gray-600 text-white font-bold py-2 px-4 rounded-lg transition-colors"><i class="fas fa-rotate-right mr-2"></i>Rotate Right</button>
                            <button id="flip-horizontal" class="bg-gray-700 hover:bg-gray-600 text-white font-bold py-2 px-4 rounded-lg transition-colors"><i class="fas fa-arrows-left-right mr-2"></i>Flip H</button>
                            <button id="flip-vertical" class="bg-gray-700 hover:bg-gray-600 text-white font-bold py-2 px-4 rounded-lg transition-colors"><i class="fas fa-arrows-up-down mr-2"></i>Flip V</button>
                        </div>
                    </div>

                    <!-- Actions -->
                    <div>
                        <h3 class="text-lg font-semibold mb-3 border-b border-gray-700 pb-2">Actions</h3>
                        <div class="grid grid-cols-2 gap-3">
                            <button id="reset-filters" class="bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-4 rounded-lg transition-colors"><i class="fas fa-undo mr-2"></i>Reset</button>
                            <button id="download-image" class="bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 rounded-lg transition-colors"><i class="fas fa-download mr-2"></i>Download</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Image Preview -->
            <div class="lg:col-span-2 bg-gray-800 p-4 rounded-lg shadow-lg flex items-center justify-center min-h-[400px] lg:min-h-0">
                <div id="image-container" class="w-full h-full flex items-center justify-center">
                    <div id="placeholder" class="text-center text-gray-500">
                        <i class="fas fa-image text-6xl mb-4"></i>
                        <p>Your image will appear here</p>
                    </div>
                    <img id="image-preview" class="hidden max-w-full max-h-full object-contain" alt="Image preview">
                </div>
            </div>
        </main>
    </div>

    <div style="position: fixed; bottom: 16px; right: 16px; background: rgba(255, 255, 255, 0.7); backdrop-filter: blur(10px); -webkit-backdrop-filter: blur(10px); padding: 6px 12px; border-radius: 9999px; font-size: 12px; color: #333; border: 1px solid rgba(0, 0, 0, 0.1); box-shadow: 0 2px 10px rgba(0,0,0,0.1); z-index: 1000;">Built with ⚡️ Silo Build 2.0</div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // DOM Elements
            const fileUpload = document.getElementById('file-upload');
            const imagePreview = document.getElementById('image-preview');
            const placeholder = document.getElementById('placeholder');
            const controlsPanel = document.getElementById('controls-panel');
            const downloadBtn = document.getElementById('download-image');
            const resetBtn = document.getElementById('reset-filters');

            // Filter Sliders
            const sliders = {
                brightness: document.getElementById('brightness'),
                contrast: document.getElementById('contrast'),
                saturate: document.getElementById('saturate'),
                grayscale: document.getElementById('grayscale'),
                sepia: document.getElementById('sepia'),
                invert: document.getElementById('invert'),
            };

            // Transform Buttons
            const transformBtns = {
                rotateLeft: document.getElementById('rotate-left'),
                rotateRight: document.getElementById('rotate-right'),
                flipHorizontal: document.getElementById('flip-horizontal'),
                flipVertical: document.getElementById('flip-vertical'),
            };

            // State
            let originalImage = null;
            let state = {
                brightness: 100,
                contrast: 100,
                saturate: 100,
                grayscale: 0,
                sepia: 0,
                invert: 0,
                rotate: 0,
                flipX: 1,
                flipY: 1,
            };

            const defaultState = { ...state };

            // File Upload Handler
            fileUpload.addEventListener('change', (e) => {
                const file = e.target.files[0];
                if (file) {
                    const reader = new FileReader();
                    reader.onload = (event) => {
                        originalImage = new Image();
                        originalImage.onload = () => {
                            imagePreview.src = event.target.result;
                            imagePreview.classList.remove('hidden');
                            placeholder.classList.add('hidden');
                            controlsPanel.classList.remove('disabled');
                            resetState();
                        };
                        originalImage.src = event.target.result;
                    };
                    reader.readAsDataURL(file);
                }
            });

            // Apply changes to image preview
            function applyChanges() {
                if (!originalImage) return;

                const filters = `brightness(${state.brightness}%) contrast(${state.contrast}%) saturate(${state.saturate}%) grayscale(${state.grayscale}%) sepia(${state.sepia}%) invert(${state.invert}%)`;
                const transforms = `rotate(${state.rotate}deg) scaleX(${state.flipX}) scaleY(${state.flipY})`;

                imagePreview.style.filter = filters;
                imagePreview.style.transform = transforms;
            }

            // Update slider value display
            function updateSliderValue(id, value) {
                document.getElementById(`${id}-value`).textContent = `${value}%`;
            }

            // Event Listeners for sliders
            Object.keys(sliders).forEach(key => {
                sliders[key].addEventListener('input', (e) => {
                    state[key] = e.target.value;
                    updateSliderValue(key, e.target.value);
                    applyChanges();
                });
            });

            // Event Listeners for transform buttons
            transformBtns.rotateLeft.addEventListener('click', () => {
                state.rotate -= 90;
                applyChanges();
            });
            transformBtns.rotateRight.addEventListener('click', () => {
                state.rotate += 90;
                applyChanges();
            });
            transformBtns.flipHorizontal.addEventListener('click', () => {
                state.flipX *= -1;
                applyChanges();
            });
            transformBtns.flipVertical.addEventListener('click', () => {
                state.flipY *= -1;
                applyChanges();
            });

            // Reset functionality
            function resetState() {
                state = { ...defaultState };
                Object.keys(sliders).forEach(key => {
                    sliders[key].value = defaultState[key];
                    updateSliderValue(key, defaultState[key]);
                });
                applyChanges();
            }

            resetBtn.addEventListener('click', resetState);

            // Download functionality
            downloadBtn.addEventListener('click', () => {
                if (!originalImage) return;

                const canvas = document.createElement('canvas');
                const ctx = canvas.getContext('2d');

                // Set canvas dimensions based on rotation
                const isSwapped = (Math.abs(state.rotate) / 90) % 2 !== 0;
                canvas.width = isSwapped ? originalImage.naturalHeight : originalImage.naturalWidth;
                canvas.height = isSwapped ? originalImage.naturalWidth : originalImage.naturalHeight;

                // Apply filters
                ctx.filter = `brightness(${state.brightness}%) contrast(${state.contrast}%) saturate(${state.saturate}%) grayscale(${state.grayscale}%) sepia(${state.sepia}%) invert(${state.invert}%)`;

                // Apply transformations
                ctx.translate(canvas.width / 2, canvas.height / 2);
                ctx.rotate(state.rotate * Math.PI / 180);
                ctx.scale(state.flipX, state.flipY);

                // Draw the image
                ctx.drawImage(
                    originalImage,
                    -originalImage.naturalWidth / 2,
                    -originalImage.naturalHeight / 2,
                    originalImage.naturalWidth,
                    originalImage.naturalHeight
                );

                // Trigger download
                const link = document.createElement('a');
                link.download = 'edited-image.png';
                link.href = canvas.toDataURL('image/png');
                link.click();
            });
        });
    </script>
</body>
</html>